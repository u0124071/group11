view.php
<?php
        session_start(); //session開啟
        include("SQL.php");
?>
<style> //css設定
body{
        margin:0px;
        padding:0px;
}
.title{
        height:100px;
        width:100%;
        background-color:#0000FF;
        margin:0px;
        padding:0px;
}
.title p{
        font-size:50px;
        text-align:center;
        line-height:100px;
}
</style>
<div class="title">
<p>Grade</p>
</div>
<?php
        if(($_SESSION['password']=="3891023182"||$_SESSION['password']=="1904694416")&&$_GET['number']=='')//admin權限
        {
                $check=mysql_query("select * from account order by number");
                echo "<table width='20%' border='1' cellspacing='0'>";//表格建立
                echo "<tr><td width='50%' bgcolor='#FFFF00'>number</td><td width='50%'>name</td></tr>";
                while($get=mysql_fetch_array($check))
                {
                      echo"<tr><td width='50%' bgcolor='#FFFF00'><a href='view.php?number=".$get['number']."'>".$get['number']."</a></td><td width='50%'>".$get['name']."</td></tr>";
                }
                echo "</table><br>";//表格結束
                echo "<a href='index.php'>Previous</a>";
        }
        else if(($_SESSION['password']=="3891023182"||$_SESSION['password']=="1904694416")&&$_GET['number']!='')//admin查詢各使用者的成績
        {
                $check=mysql_fetch_array(mysql_query("select password from account where number=".$_GET['number'].""));
                $check=mysql_query("select * from  checkin where password=".$check['password']." order by date asc");//各項成績
echo $get['chinese'];
                echo "<table width='100%' border='1' cellspacing='0'>";//表格建立
                echo "<tr><td width='20%' bgcolor='#FFFF00'>Date</td><td width='20%'>Chinese</td><td width='20%' bgcolor='#FFFF00'>English</td><td width='20%'>Math</td><td width='20%' bgcolor='#FFFF00'>Attendance</td></tr>";
                while($get=mysql_fetch_array($check))
                {
                        if($get['attendance']==0)//點名
                        {
                             $attendance='Not here.';
                                                                                                                                                                                               }
                        else
                        {
                             $attendance='Here.';
                        }
                        echo"<tr><td width='20%' bgcolor='#FFFF00'>".$get['date']."</td><td width='20%'>".$get['chinese']."</td><td width='20%' bgcolor='#FFFF00'>".$get['english']."</td><td width='20%'>".$get['math']."</td><td width='20%' bgcolor='#FFFF00'>".$attendance."</td></tr>";
               }
               $check=mysql_fetch_array(mysql_query("select password from account where number=".$_GET['number'].""));
               $check=mysql_fetch_array(mysql_query("select count(password) as sum,sum(chinese) as chinese,sum(english) as english,sum(math) as math,sum(attendance) as attendance from  checkin where password=".$check['password'].""));//總成績
               echo"<tr bgcolor='#FF0000'><td width='20%'>Average</td><td width='20%'>".(round($check['chinese']/$check['sum'],0))."</td><td width='20%'>".(round($check['english']/$check['sum'],0))."</td><td width='20%'>".(round($check['math']/$check['sum'],0))."</td><td width='20%'>".($check['attendance']/2)."%</td></tr>";
               echo "</table><br>";//表格結束
               echo "<a href='view.php'>Previous</a>";
        }
        else//一般使用者查詢成績
        {
                $check=mysql_query("select * from  checkin where password=".$_SESSION['password']." order by date asc");//各項成績
                echo "<table width='100%' border='1' cellspacing='0'>";//表格建立
                echo "<tr><td width='20%' bgcolor='#FFFF00'>Date</td><td width='20%'>Chinese</td><td width='20%' bgcolor='#FFFF00'>English</td><td width='20%'>Math</td><td width='20%' bgcolor='#FFFF00'>Attendance</td></tr>";
                while($get=mysql_fetch_array($check))
                {
                        if($get['attendance']==0)//點名
                        {
                                $attendance='Not here.';
                        }
                        else
                        {
                                $attendance='Here.';
                        }
                       echo"<tr><td width='20%' bgcolor='#FFFF00'>".$get['date']."</td><td width='20%'>".$get['chinese']."</td><td width='20%' bgcolor='#FFFF00'>".$get['english']."</td><td width='20%'>".$get['math']."</td><td width='20%' bgcolor='#FFFF00'>".$attendance."</td></tr>";
                }
               $check=mysql_fetch_array(mysql_query("select count(password) as sum,sum(chinese) as chinese,sum(english) as english,sum(math) as math,sum(attendance) as attendance from  checkin where password=".$_SESSION['password'].""));//總成績
               echo"<tr bgcolor='#FF0000'><td width='20%'>Average</td><td width='20%'>".(round($check['chinese']/$check['sum'],0))."</td><td width='20%'>".(round($check['english']/$check['sum'],0))."</td><td width='20%'>".(round($check['math']/$check['sum'],0))."</td><td width='20%'>".($check['attendance']/2)."%</td></tr>";
                echo "</table><br>";//表格結束
                echo "<a href='index.php'>Previous</a>";
        }
?>


----------------------------------------------------------
index.php
<?php
	session_start(); 
	include("SQL.php"); 載入檔案
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>RFID</title>
</head>
<body>
<form name="form1" method="post">
<input name="password" type="password">
<input name="submit" type="submit" value="login">
<input name="action" type="hidden" value="login">
</form>
<?php
		
	if($_POST['action']=="login") 按登入後跑這個if
	{
		if(mysql_fetch_array(mysql_query("SELECT  `password`, `number`, `name` FROM `account` WHERE `password` = '".$_POST['password']."'"))) 查詢逼卡後有沒有使用者
		{
			$_SESSION['password']=$_POST['password'];有的話資料暫存在伺服器
			$date=date("Y")."-".date("m")."-".date("d");作當天日期
			if(!mysql_fetch_array(mysql_query("select chinese,english,math from checkin where password ='".$_POST['password']."' and date='$date'")))確認當天有無資料存在
			{
				mysql_query("insert into checkin values('".$_POST['password']."',0,0,0,1,'$date')");沒有即存
			}
			$check=mysql_fetch_array(mysql_query("select chinese,english,math,attendance from checkin where password ='".$_POST['password']."' and date='$date'")); 當天資料抓出
			if($check['attendance']==0)確認點名
				$attendance="Not Here!";
			else
				$attendance="Here!";
			echo "Hello!!&nbsp".$check['number']."&nbsp".$check['name'];
			echo "Today Grade<br>";
			echo "<blockquote>";
			echo "<form name='form2' method='post'>
			      Chinese:<input name='chinese' type='text' value='".$check['chinese']."'><br>
				  English:<input name='english' type='text' value='".$check['english']."'><br>
				  Math:<input name='math' type='text' value='".$check['math']."'><br>
				  Attendance:$attendance<br>
			      <input name='submit' type='submit' value='submit_grade'>
				  <input name='action' type='hidden' value='submit_grade'><br>
				  </form>";
			echo "<a href='view.php'>view</a>  ";
			echo "<a href='index.php?action=logout'>logout</a>";
			echo "</blockquote>";
		}
		else
		{
			echo "Not Found!";
		}
	}
	else if($_POST['action']=="submit_grade"&&$_SESSION['password']!='') 登入成績
	{
		$date=date("Y")."-".date("m")."-".date("d");
		mysql_query("update checkin set chinese='".$_POST['chinese']."',english='".$_POST['english']."',math='".$_POST['math']."' where password='".$_SESSION['password']."' and date='$date'");
		$check=mysql_fetch_array(mysql_query("select chinese,english,math,attendance from checkin where password ='".$_SESSION['password']."' and date='$date'"));
		if($check['attendance']==0)
			$attendance="Not Here!";
		else
			$attendance="Here!";
		echo "Hello!!&nbsp".$check['number']."&nbsp".$check['name'];
		echo "Today Grade<br>";
		echo "<blockquote>";
		echo "<form name='form2' method='post'>
		      Chinese:<input name='chinese' type='text' value='".$check['chinese']."'><br>
			  English:<input name='english' type='text' value='".$check['english']."'><br>
			  Math:<input name='math' type='text' value='".$check['math']."'><br>
			  Attendance:$attendance<br>
		      <input name='submit' type='submit' value='submit_grade'>
			  <input name='action' type='hidden' value='submit_grade'><br>
			  </form>";
		echo "<a href='view.php'>view</a>  ";
		echo "<a href='index.php?action=logout'>logout</a>";
		echo "</blockquote>";
	} 登入成績結束
	else if($_SESSION['password']!=''&&$_POST['action']!='login'&&$_POST['action']!='submit_grade'&&$_GET['action']!='logout') 上一頁後呈現的畫面
	{
		$date=date("Y")."-".date("m")."-".date("d");
		$check=mysql_fetch_array(mysql_query("select chinese,english,math,attendance from checkin where password ='".$_SESSION['password']."' and date='$date'"));
		if($check['attendance']==0)
			$attendance="Not Here!";
		else
			$attendance="Here!";
		echo "Hello!!&nbsp".$check['number']."&nbsp".$check['name'];
		echo "Today Grade<br>";
		echo "<blockquote>";
		echo "<form name='form2' method='post'>
		      Chinese:<input name='chinese' type='text' value='".$check['chinese']."'><br>
			  English:<input name='english' type='text' value='".$check['english']."'><br>
			  Math:<input name='math' type='text' value='".$check['english']."'><br>
			  Attendance:$attendance<br>
		      <input name='submit' type='submit' value='submit_grade'>
			  <input name='action' type='hidden' value='submit_grade'><br>
			  </form>";
		echo "<a href='view.php'>view</a>  ";
		echo "<a href='index.php?action=logout'>logout</a>";
		echo "</blockquote>"; 輸入成績所有表格
	}
	else if($_SESSION['password']!=''&&$_GET['action']=='logout') 登出
	{
		$_SESSION['password']='';
		echo "<script>location.href='index.php'</script>"; 登出跳網址
	}
?>
</body>
</html>